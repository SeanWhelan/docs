---
title: "AlloyDB"
description: "This connector materializes Flow collections into tables in an AlloyDB database."
---

AlloyDB is a fully managed, PostgreSQL-compatible database available in the Google Cloud platform. This connector is derived from the [PostgreSQL materialization connector](/reference/Connectors/materialization-connectors/PostgreSQL/), so the same configuration applies, but the setup steps look somewhat different.

It's available for use in the Flow web application. For local development or open-source workflows, [`ghcr.io/estuary/materialize-alloydb:dev`](https://ghcr.io/estuary/materialize-alloydb:dev) provides the latest version of the connector as a Docker image. You can also follow the link in your browser to see past image versions.

## Prerequisites[​](#prerequisites "Direct link to Prerequisites")

To use this connector, you'll need:

* An AlloyDB database to which to materialize, and user credentials. The connector will create new tables in the database per your specification. Tables created manually in advance are not supported.
* A virtual machine to connect securely to the instance via SSH tunneling. (AlloyDB doesn't support IP allowlisting.) Follow the instructions to create a [virtual machine for SSH tunneling](/guides/connect-network/#setup-for-google-cloud) in the same Google Cloud project as your instance.

## Configuration[​](#configuration "Direct link to Configuration")

To use this connector, begin with data in one or more Flow collections. Use the below properties to configure an AlloyDB materialization, which will direct one or more of your Flow collections to your desired tables, or views, in the database.

### Properties[​](#properties "Direct link to Properties")

#### Endpoint[​](#endpoint "Direct link to Endpoint")

The SSH config section is required for this connector. You'll fill in the database address with a localhost IP address, and specify your VM's IP address as the SSH address. See the table below and the [sample config](#sample).

| Property                                  | Title           | Description                                                                                                                                                                                                                    | Type   | Required/Default |
| ----------------------------------------- | --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------ | ---------------- |
| `/database`                               | Database        | Name of the logical database to materialize to.                                                                                                                                                                                | string |                  |
| **`/address`**                            | Address         | Host and port. Set to `127.0.0.1:5432` to enable SSH tunneling.                                                                                                                                                                | string | Required         |
| **`/password`**                           | Password        | Password for the specified database user.                                                                                                                                                                                      | string | Required         |
| `/schema`                                 | Database Schema | Database [schema](https://www.postgresql.org/docs/current/ddl-schemas.html) to use for materialized tables (unless overridden within the binding resource configuration) as well as associated materialization metadata tables | string | `"public"`       |
| **`/user`**                               | User            | Database user to connect as.                                                                                                                                                                                                   | string | Required         |
| `networkTunnel`                           | Network Tunnel  | Connect to your system through an SSH server that acts as a bastion host for your network.                                                                                                                                     | Object |                  |
| `networkTunnel/sshForwarding`             | SSH Forwarding  |                                                                                                                                                                                                                                | Object |                  |
| `networkTunnel/sshForwarding/sshEndpoint` | SSH Endpoint    | Endpoint of the remote SSH server (in this case, your Google Cloud VM) that supports tunneling (in the form of ssh://user\@address.                                                                                            | String |                  |
| `networkTunnel/sshForwarding/privateKey`  | SSH Private Key | Private key to connect to the remote SSH server.                                                                                                                                                                               | String |                  |

#### Bindings[​](#bindings "Direct link to Bindings")

| Property                       | Title                       | Description                                                                                                        | Type    | Required/Default |
| ------------------------------ | --------------------------- | ------------------------------------------------------------------------------------------------------------------ | ------- | ---------------- |
| `/additional_table_create_sql` | Additional Table Create SQL | Additional SQL statement(s) to be run in the same transaction that creates the table.                              | string  |                  |
| `/delta_updates`               | Delta Update                | Should updates to this table be done via delta updates.                                                            | boolean | `false`          |
| `/schema`                      | Alternative Schema          | Alternative schema for this table (optional). Overrides schema set in endpoint configuration.                      | string  |                  |
| **`/table`**                   | Table                       | Table name to materialize to. It will be created by the connector, unless the connector has previously created it. | string  | Required         |

### Sample[​](#sample "Direct link to Sample")

```
materializations:  ${PREFIX}/${mat_name}:    endpoint:      connector:        image: ghcr.io/estuary/materialize-alloydb:dev        config:          database: postgres          address: 127.0.0.1:5432          password: flow          user: flow          networkTunnel:            sshForwarding:              sshEndpoint: ssh://sshUser@<vm-ip-address>              privateKey: |2              -----BEGIN RSA PRIVATE KEY-----              MIICXAIBAAKBgQCJO7G6R+kv2MMS8Suw21sk2twHg8Vog0fjimEWJEwyAfFM/Toi              EJ6r5RTaSvN++/+MPWUll7sUdOOBZr6ErLKLHEt7uXxusAzOjMxFKZpEARMcjwHY              v/tN1A2OYU0qay1DOwknEE0i+/Bvf8lMS7VDjHmwRaBtRed/+iAQHf128QIDAQAB              AoGAGoOUBP+byAjDN8esv1DCPU6jsDf/Tf//RbEYrOR6bDb/3fYW4zn+zgtGih5t              CR268+dwwWCdXohu5DNrn8qV/Awk7hWp18mlcNyO0skT84zvippe+juQMK4hDQNi              ywp8mDvKQwpOuzw6wNEitcGDuACx5U/1JEGGmuIRGx2ST5kCQQDsstfWDcYqbdhr              5KemOPpu80OtBYzlgpN0iVP/6XW1e5FCRp2ofQKZYXVwu5txKIakjYRruUiiZTza              QeXRPbp3AkEAlGx6wMe1l9UtAAlkgCFYbuxM+eRD4Gg5qLYFpKNsoINXTnlfDry5              +1NkuyiQDjzOSPiLZ4Abpf+a+myjOuNL1wJBAOwkdM6aCVT1J9BkW5mrCLY+PgtV              GT80KTY/d6091fBMKhxL5SheJ4SsRYVFtguL2eA7S5xJSpyxkadRzR0Wj3sCQAvA              bxO2fE1SRqbbF4cBnOPjd9DNXwZ0miQejWHUwrQO0inXeExNaxhYKQCcnJNUAy1J              6JfAT/AbxeSQF3iBKK8CQAt5r/LLEM1/8ekGOvBh8MAQpWBW771QzHUN84SiUd/q              xR9mfItngPwYJ9d/pTO7u9ZUPHEoat8Ave4waB08DsI=              -----END RSA PRIVATE KEY-----    bindings:      - resource:          table: ${TABLE_NAME}        source: ${PREFIX}/${COLLECTION_NAME}
```

## Reserved words[​](#reserved-words "Direct link to Reserved words")

PostgreSQL has a list of reserved words that must be quoted in order to be used as an identifier. Flow considers all the reserved words that are marked as "reserved" in any of the columns in the official [PostgreSQL documentation](https://www.postgresql.org/docs/current/sql-keywords-appendix.html).

These reserved words are listed in the table below. Flow automatically quotes fields that are in this list.

| Reserved words                     |                                      |                        |                  |                  |
| ---------------------------------- | ------------------------------------ | ---------------------- | ---------------- | ---------------- |
| abs                                | current\_transform\_group\_for\_type | indicator              | order            | sqlexception     |
| absolute                           | current\_user                        | initial                | out              | sqlstate         |
| acos                               | cursor                               | initially              | outer            | sqlwarning       |
| action                             | cycle                                | inner                  | output           | sqrt             |
| add                                | datalink                             | inout                  | over             | start            |
| all                                | date                                 | input                  | overlaps         | static           |
| allocate                           | day                                  | insensitive            | overlay          | stddev\_pop      |
| alter                              | deallocate                           | insert                 | pad              | stddev\_samp     |
| analyse                            | dec                                  | int                    | parameter        | submultiset      |
| analyze                            | decfloat                             | integer                | partial          | subset           |
| and                                | decimal                              | intersect              | partition        | substring        |
| any                                | declare                              | intersection           | pattern          | substring\_regex |
| are                                | default                              | interval               | per              | succeeds         |
| array                              | deferrable                           | into                   | percent          | sum              |
| array\_agg                         | deferred                             | is                     | percentile\_cont | symmetric        |
| array\_max\_cardinality            | define                               | isnull                 | percentile\_disc | system           |
| as                                 | delete                               | isolation              | percent\_rank    | system\_time     |
| asc                                | dense\_rank                          | join                   | period           | system\_user     |
| asensitive                         | deref                                | json\_array            | permute          | table            |
| asin                               | desc                                 | json\_arrayagg         | placing          | tablesample      |
| assertion                          | describe                             | json\_exists           | portion          | tan              |
| asymmetric                         | descriptor                           | json\_object           | position         | tanh             |
| at                                 | deterministic                        | json\_objectagg        | position\_regex  | temporary        |
| atan                               | diagnostics                          | json\_query            | power            | then             |
| atomic                             | disconnect                           | json\_table            | precedes         | time             |
| authorization                      | distinct                             | json\_table\_primitive | precision        | timestamp        |
| avg                                | dlnewcopy                            | json\_value            | prepare          | timezone\_hour   |
| begin                              | dlpreviouscopy                       | key                    | preserve         | timezone\_minute |
| begin\_frame                       | dlurlcomplete                        | lag                    | primary          | to               |
| begin\_partition                   | dlurlcompleteonly                    | language               | prior            | trailing         |
| between                            | dlurlcompletewrite                   | large                  | privileges       | transaction      |
| bigint                             | dlurlpath                            | last                   | procedure        | translate        |
| binary                             | dlurlpathonly                        | last\_value            | ptf              | translate\_regex |
| bit                                | dlurlpathwrite                       | lateral                | public           | translation      |
| bit\_length                        | dlurlscheme                          | lead                   | range            | treat            |
| blob                               | dlurlserver                          | leading                | rank             | trigger          |
| boolean                            | dlvalue                              | left                   | read             | trim             |
| both                               | do                                   | level                  | reads            | trim\_array      |
| by                                 | domain                               | like                   | real             | true             |
| call                               | double                               | like\_regex            | recursive        | truncate         |
| called                             | drop                                 | limit                  | ref              | uescape          |
| cardinality                        | dynamic                              | listagg                | references       | union            |
| cascade                            | each                                 | ln                     | referencing      | unique           |
| cascaded                           | element                              | local                  | regr\_avgx       | unknown          |
| case                               | else                                 | localtime              | regr\_avgy       | unmatched        |
| cast                               | empty                                | localtimestamp         | regr\_count      | unnest           |
| catalog                            | end                                  | log                    | regr\_intercept  | update           |
| ceil                               | end-exec                             | log10                  | regr\_r2         | upper            |
| ceiling                            | end\_frame                           | lower                  | regr\_slope      | usage            |
| char                               | end\_partition                       | match                  | regr\_sxx        | user             |
| character                          | equals                               | matches                | regr\_sxy        | using            |
| character\_length                  | escape                               | match\_number          | regr\_syy        | value            |
| char\_length                       | every                                | match\_recognize       | relative         | values           |
| check                              | except                               | max                    | release          | value\_of        |
| classifier                         | exception                            | measures               | restrict         | varbinary        |
| clob                               | exec                                 | member                 | result           | varchar          |
| close                              | execute                              | merge                  | return           | variadic         |
| coalesce                           | exists                               | method                 | returning        | varying          |
| collate                            | exp                                  | min                    | returns          | var\_pop         |
| collation                          | external                             | minute                 | revoke           | var\_samp        |
| collect                            | extract                              | mod                    | right            | verbose          |
| column                             | false                                | modifies               | rollback         | versioning       |
| commit                             | fetch                                | module                 | rollup           | view             |
| concurrently                       | filter                               | month                  | row              | when             |
| condition                          | first                                | multiset               | rows             | whenever         |
| connect                            | first\_value                         | names                  | row\_number      | where            |
| connection                         | float                                | national               | running          | width\_bucket    |
| constraint                         | floor                                | natural                | savepoint        | window           |
| constraints                        | for                                  | nchar                  | schema           | with             |
| contains                           | foreign                              | nclob                  | scope            | within           |
| continue                           | found                                | new                    | scroll           | without          |
| convert                            | frame\_row                           | next                   | search           | work             |
| copy                               | free                                 | no                     | second           | write            |
| corr                               | freeze                               | none                   | section          | xml              |
| corresponding                      | from                                 | normalize              | seek             | xmlagg           |
| cos                                | full                                 | not                    | select           | xmlattributes    |
| cosh                               | function                             | notnull                | sensitive        | xmlbinary        |
| count                              | fusion                               | nth\_value             | session          | xmlcast          |
| covar\_pop                         | get                                  | ntile                  | session\_user    | xmlcomment       |
| covar\_samp                        | global                               | null                   | set              | xmlconcat        |
| create                             | go                                   | nullif                 | show             | xmldocument      |
| cross                              | goto                                 | numeric                | similar          | xmlelement       |
| cube                               | grant                                | occurrences\_regex     | sin              | xmlexists        |
| cume\_dist                         | group                                | octet\_length          | sinh             | xmlforest        |
| current                            | grouping                             | of                     | size             | xmliterate       |
| current\_catalog                   | groups                               | offset                 | skip             | xmlnamespaces    |
| current\_date                      | having                               | old                    | smallint         | xmlparse         |
| current\_default\_transform\_group | hold                                 | omit                   | some             | xmlpi            |
| current\_path                      | hour                                 | on                     | space            | xmlquery         |
| current\_role                      | identity                             | one                    | specific         | xmlserialize     |
| current\_row                       | ilike                                | only                   | specifictype     | xmltable         |
| current\_schema                    | immediate                            | open                   | sql              | xmltext          |
| current\_time                      | import                               | option                 | sqlcode          | xmlvalidate      |
| current\_timestamp                 | in                                   | or                     | sqlerror         | year             |

[Edit this page](https://github.com/estuary/flow/edit/master/site/docs/reference/Connectors/materialization-connectors/alloydb.md)
